<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="vitebook@0.23.6" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/manifest.json" />
    <title>2. Verifiable Type Definitions | Sonr Docs</title>
   <meta name="description" content="The Internet rebuilt for you.">
   <script>
  const key = '@vitebook/color-scheme';
  const saved = window.localStorage.getItem(key) ?? 'auto';
  const dark = saved === 'auto' ?
    window.matchMedia('(prefers-color-scheme: dark)').matches
    : saved === 'dark';
  if (dark) {
    const htmlEl = window.document.querySelector('html');
    htmlEl.classList.add('dark')
  }
    </script>
   <meta property="og:site_name" content="Sonr Docs">
   <meta property="og:title" content="2. Verifiable Type Definitions | Sonr Docs">
   <meta property="og:description" content="The Internet rebuilt for you.">
   <meta property="twitter:title" content="2. Verifiable Type Definitions | Sonr Docs">
   <meta property="twitter:description" content="The Internet rebuilt for you.">
    <link rel="stylesheet" href="/assets/css/style.dacc38f8.css">
    <link rel="modulepreload" crossorigin href="/assets/js/framework.40d14ebd.js">
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="app"><div class="theme __vbk__ svelte-kg26u5">
    
  

  
    <aside class="sidebar __vbk__ svelte-mg6wx9" aria-hidden="true">

  <div class="sidebar__header __vbk__ svelte-mg6wx9"><div class="sidebar__header-wrapper __vbk__ svelte-mg6wx9"><a class="navbar__title __vbk__ svelte-1f6oyy2" href="/" aria-label="Sonr Docs, Take me home"><div class="navbar__logo __vbk__ svelte-1f6oyy2"><!-- HTML_TAG_START --><svg width="32" height="32" viewBox="0 0 32 32" fill="none"
    xmlns="http://www.w3.org/2000/svg">
    <path d="M15.0236 11.2575L11.2616 15.0192C10.7213 15.5594 10.7213 16.4354 11.2616 16.9757L15.0236 20.7374C15.5639 21.2776 16.4399 21.2776 16.9802 20.7374L20.7422 16.9757C21.2825 16.4354 21.2825 15.5594 20.7422 15.0192L16.9802 11.2575C16.4399 10.7172 15.5639 10.7172 15.0236 11.2575Z" fill="currentColor"/>
    <path d="M16.0011 30.6666C15.0353 30.67 14.0784 30.4816 13.1861 30.1123C12.2937 29.7431 11.4835 29.2002 10.8026 28.5154L10.0028 27.7157L13.4138 24.3049L14.2136 25.1046C14.6864 25.5772 15.3275 25.8427 15.9961 25.8427C16.6646 25.8427 17.3057 25.5772 17.7786 25.1046L25.1024 17.7813C25.5739 17.3084 25.8387 16.6678 25.8387 16C25.8387 15.3321 25.5739 14.6916 25.1024 14.2186L21.4455 10.566L24.8565 7.1552L28.5194 10.8179C29.8944 12.196 30.6667 14.0632 30.6667 16.01C30.6667 17.9567 29.8944 19.8239 28.5194 21.2021L21.1936 28.5254C20.5127 29.2079 19.7031 29.7486 18.8118 30.1161C17.9205 30.4837 16.9652 30.6708 16.0011 30.6666Z" fill="currentColor"/>
    <path d="M7.13965 24.8547L3.48472 21.1921C2.80266 20.5103 2.26161 19.7009 1.89247 18.81C1.52333 17.9192 1.33333 16.9643 1.33333 16C1.33333 15.0357 1.52333 14.0808 1.89247 13.1899C2.26161 12.299 2.80266 11.4896 3.48472 10.8079L10.8086 3.48456C11.4904 2.80256 12.2999 2.26155 13.1908 1.89243C14.0817 1.52332 15.0367 1.33334 16.0011 1.33334C16.9654 1.33334 17.9204 1.52332 18.8113 1.89243C19.7023 2.26155 20.5117 2.80256 21.1935 3.48456L21.9933 4.28427L18.5823 7.69502L17.7825 6.89531C17.3097 6.42272 16.6686 6.15723 16.0001 6.15723C15.3315 6.15723 14.6904 6.42272 14.2176 6.89531L6.89372 14.2186C6.65976 14.4526 6.47417 14.7303 6.34754 15.0359C6.22092 15.3416 6.15575 15.6691 6.15575 16C6.15575 16.3308 6.22092 16.6584 6.34754 16.964C6.47417 17.2697 6.65976 17.5474 6.89372 17.7813L10.5566 21.444L7.13965 24.8547Z" fill="currentColor"/>
</svg>
<!-- HTML_TAG_END --></div>
  Sonr Docs
</a>
        <div class="__vbk__" style="flex-grow: 1; margin-left: 2.5rem;"></div>
        
        
        <a class="brand-link github svelte-c7t2ho __vbk__" href="https://sonr.io/github" aria-label="Source" target="_blank"><span class="brand-link__icon __vbk__"><!-- HTML_TAG_START --><!-- HTML_TAG_END --></span></a>
        <button class="theme-switch  svelte-1lvoxbk __vbk__" role="switch" aria-label="Toggle dark mode" aria-checked="false"><span class="theme-switch__icon light-icon __vbk__ svelte-1lvoxbk"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1.2em" height="1.2em"  preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>
<!-- HTML_TAG_END --></span>
    <span class="theme-switch__icon dark-icon __vbk__ svelte-1lvoxbk"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1.2em" height="1.2em"  preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none"><path d="M20.354 15.354A9 9 0 0 1 8.646 3.646A9.003 9.003 0 0 0 12 21a9.003 9.003 0 0 0 8.354-5.646z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>
<!-- HTML_TAG_END --></span></button></div></div>

  <div class="sidebar__body __vbk__ svelte-mg6wx9"><button aria-hidden="false" class="sidebar__back-button __vbk__   svelte-mijklx"><span class="sidebar__back-button__arrow __vbk__ svelte-mg6wx9"><!-- HTML_TAG_START --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1.2em" height="1.2em"  preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none"><path d="M11 17l-5-5m0 0l5-5m-5 5h12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>
<!-- HTML_TAG_END --></span>
        Back to main menu</button>

    <div class="sidebar__main-menu __vbk__ svelte-mg6wx9" aria-hidden="true"></div>

    <ul class="sidebar__current-menu __vbk__ svelte-mg6wx9" aria-hidden="false"><li class="sidebar-item __vbk__ svelte-1exgrzc"><a href="/architecture/overview.html" class="sidebar-link __vbk__     svelte-mijklx"><span class="sidebar-link__text __vbk__ svelte-1exgrzc">
      Overview
      </span></a>
</li><li class="sidebar-item __vbk__ svelte-1exgrzc"><a href="/architecture/adr-001.html" class="sidebar-link __vbk__     svelte-mijklx"><span class="sidebar-link__text __vbk__ svelte-1exgrzc">
      1. Decentralized Identifiers
      </span></a>
</li><li class="sidebar-item __vbk__ svelte-1exgrzc"><a href="/architecture/adr-002.html" class="sidebar-link __vbk__ active    svelte-mijklx"><span class="sidebar-link__text __vbk__ svelte-1exgrzc active">
      2. Verifiable Type Definitions
      </span></a>
</li><li class="sidebar-item __vbk__ svelte-1exgrzc"><a href="/architecture/adr-003.html" class="sidebar-link __vbk__     svelte-mijklx"><span class="sidebar-link__text __vbk__ svelte-1exgrzc">
      3. User and App Specific Storage
      </span></a>
</li><li class="sidebar-item __vbk__ svelte-1exgrzc"><a href="/architecture/adr-004.html" class="sidebar-link __vbk__     svelte-mijklx"><span class="sidebar-link__text __vbk__ svelte-1exgrzc">
      4. Peer-to-Peer Streams
      </span></a>
</li><li class="sidebar-item __vbk__ svelte-1exgrzc"><a href="/architecture/adr-005.html" class="sidebar-link __vbk__     svelte-mijklx"><span class="sidebar-link__text __vbk__ svelte-1exgrzc">
      5. NFT Standard
      </span></a>
</li><li class="sidebar-item __vbk__ svelte-1exgrzc"><a href="/architecture/adr-006.html" class="sidebar-link __vbk__     svelte-mijklx"><span class="sidebar-link__text __vbk__ svelte-1exgrzc">
      6. Invokable Functions
      </span></a>
</li></ul></div>

  
      
</aside>
  

  <div class="preview __vbk__ svelte-kg26u5 md">

    

    

    <div class="preview__content __vbk__ svelte-kg26u5">
        <main class="page type-svelte:md svelte-jhktk __vbk__  with-toc"><div class="page__container __vbk__ svelte-jhktk">

    <!-- HTML_TAG_START --><h1 id="adr-002-ipld-objects-with-jose" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#adr-002-ipld-objects-with-jose" aria-hidden="true">#</a> ADR-002: IPLD Objects With JOSE</h1><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><a href="https://hackmd.io/iomfscGXR1ycI_67NrLvMw" target="_blank" rel="noopener noreferrer" class="__vbk__"><img src="https://hackmd.io/iomfscGXR1ycI_67NrLvMw/badge" alt="hackmd-github-sync-badge"><OutboundLink></OutboundLink></a></p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="summary" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#summary" aria-hidden="true">#</a> Summary</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Implement Object Schemas based on <a href="https://ipld.io" target="_blank" rel="noopener noreferrer" class="__vbk__">IPLD<OutboundLink></OutboundLink></a> which support <a href="https://jose.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer" class="__vbk__">JOSE<OutboundLink></OutboundLink></a> operations.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="abstract" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#abstract" aria-hidden="true">#</a> Abstract</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Objects on the Sonr network provide a way for users and applications to persist data.
The problem with modern software architectures is that the security of user data is not guaranteed—a problem Sonr aims to solve with the help of JavaScript Object Signing and Encryption (JOSE).</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Additionally, today’s software stack is not built with interoperability in mind.
An entire layer must be added to any application to support communication with other applications. IPLD provides a standard and decentralized way for any motor node to make use of the data stored on Sonr.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The combining of these technologies begets a system in which user data is always encrypted and can never be owned by one application, not even the application that created it.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="primer" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#primer" aria-hidden="true">#</a> Primer</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The content of this ADR is based on the works of ADR-001 as well as a few core technologies—all of which should be well understood before reading ADR-002. Here is a list of resources.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><ul class="__vbk__">
<li class="__vbk__"><a href="/articles/reference/adr-001" class="__vbk__">ADR-001</a></li>
<li class="__vbk__"><a href="https://ipld.io/docs/intro/primer/" target="_blank" rel="noopener noreferrer" class="__vbk__">IPLD Primer<OutboundLink></OutboundLink></a></li>
<li class="__vbk__"><a href="https://docs.ipfs.io/concepts/" target="_blank" rel="noopener noreferrer" class="__vbk__">IPFS Concepts<OutboundLink></OutboundLink></a></li>
</ul><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="glossary" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#glossary" aria-hidden="true">#</a> Glossary</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="json-web-signature-jws" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#json-web-signature-jws" aria-hidden="true">#</a> <code class="__vbk__">JSON Web Signature (JWS)</code></h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">JavaScript Object Notation (JSON) data structure that represents a cryptographic key.
This specification also defines a JWK Set JSON data structure that represents a set of JWKs.
Cryptographic algorithms and identifiers for use with this specification are described in the separate JSON Web Algorithms (JWA) specification and IANA registries established by that specification.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="json-web-encryption-jwe" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#json-web-encryption-jwe" aria-hidden="true">#</a> <code class="__vbk__">JSON Web Encryption (JWE)</code></h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">JSON Web Encryption (JWE) represents encrypted content using JSON-based data structures.
Cryptographic algorithms and identifiers
for use with this specification are described in the separate JSON Web Algorithms (JWA) specification and IANA registries defined by that specification.  Related digital signature and Message Authentication Code (MAC) capabilities are described in the separate JSON Web Signature (JWS) specification.</p><!-- HTML_TAG_END -->

<!-- HTML_TAG_START --><h4 id="json-web-key-jwk" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#json-web-key-jwk" aria-hidden="true">#</a> <code class="__vbk__">JSON Web Key (JWK)</code></h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">A JSON Web Key (JWK) is a JavaScript Object Notation (JSON) data structure that represents a cryptographic key.  This specification also defines a JWK Set JSON data structure that represents a set of JWKs.
Cryptographic algorithms and identifiers for use with this
specification are described in the separate JSON Web Algorithms (JWA)
specification and IANA registries established by that specification.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="schema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#schema" aria-hidden="true">#</a> <code class="__vbk__">Schema</code></h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">A definition that outlines a structure for data to be stored within a persistence layer. These structures conform to a standard of <code class="__vbk__">key value pairs</code> where the <code class="__vbk__">key</code> is a string and the value is one of a set number of <code class="__vbk__">Types</code>.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="identity" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#identity" aria-hidden="true">#</a> <code class="__vbk__">Identity</code></h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">An identity is derived from the user's provided key upon registration.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="objective" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#objective" aria-hidden="true">#</a> Objective</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The objective of ADR-002 is to define how Sonr manages the creation and access of data on its network. A proper solution must have these attributes.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><ul class="__vbk__">
<li class="__vbk__">Enable <em class="__vbk__">motor</em> nodes to store data on behalf of a user.</li>
<li class="__vbk__">Enable devices which belong to the same user to access the same data.</li>
<li class="__vbk__">Enable certain data to be shared with other users.</li>
<li class="__vbk__">Allow for revoking access to both devices and other users.</li>
<li class="__vbk__">Maintain that all data is encrypted in transit and at rest.</li>
</ul><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="changes-from-adr-001" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#changes-from-adr-001" aria-hidden="true">#</a> Changes From ADR-001</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">To accommodate the features proposed by ADR-002, a few changes to terminology will be made from ADR-001.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="rename-object-to-schema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#rename-object-to-schema" aria-hidden="true">#</a> Rename <strong class="__vbk__">Object</strong> to <strong class="__vbk__">Schema</strong></h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><em class="__vbk__">Object</em> in ADR-001 represents a type definition in Sonr. This name is misleading as it creates ambiguity between the type definition and the data which is of that type. With the addition of IPLD, the term <em class="__vbk__">Schema</em> will better express the concepts that were represented by <em class="__vbk__">Object</em> while creating consistency with the libraries we employ.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="client-side-encryption-with-jose" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#client-side-encryption-with-jose" aria-hidden="true">#</a> Client-Side Encryption with JOSE</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">A core principle of Sonr is to never let private user data pass unencrypted through the network. To achieve this, the <em class="__vbk__">motor</em> node must be responsible for encrypting and decrypting all data. This section describes how a user may securely store data on Sonr and maintain the ability to access that data from any <em class="__vbk__">motor</em> associated with his/her account.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="encryption" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#encryption" aria-hidden="true">#</a> Encryption</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">In order for encrypted data to be accessed from multiple devices, there must be a <a href="https://en.wikipedia.org/wiki/Symmetric-key_algorithm" target="_blank" rel="noopener noreferrer" class="__vbk__">shared key<OutboundLink></OutboundLink></a> for each piece of data that will be accessible to each <em class="__vbk__">motor</em>.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="key-creation" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#key-creation" aria-hidden="true">#</a> Key Creation</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The <a href="https://jose.readthedocs.io/en/latest/#jwk" target="_blank" rel="noopener noreferrer" class="__vbk__">JWK<OutboundLink></OutboundLink></a> used during the encryption process is determined by the access levels for the data. As the owner of data, the user <code class="__vbk__">bucket</code> will contain a map of encrypted JWKs: <code class="__vbk__">map[CID]map[PK]JWK</code> [henceforth referenced to as the Object Encryption Key Map (OEKM)]; where CID is the CID of the object, PK is the public key of a member who has access, and JWK is the JWK used to encrypt the data.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">For objects shared with other users, the OEKM may exist in a dedicated bucket, but this is an implementation detail for the developer.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="client" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#client" aria-hidden="true">#</a> Client</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><ol class="__vbk__">
<li class="__vbk__">An object is created using a <em class="__vbk__">Schema</em>—this is what will be stored.</li>
<li class="__vbk__">The <em class="__vbk__">motor</em> encrypts the data using its shared key for private data. If the data is meant to be shared with a party, a key specific to that party is used.
<ul class="__vbk__">
<li class="__vbk__">Any property in the data that is represented as a separate <em class="__vbk__">Schema</em> will be encrypted separately and included with the POST request.</li>
<li class="__vbk__">Each encrypted <em class="__vbk__">schema</em> will also have a corresponding CID. Because CIDs are generated predictably, this will be computed by the <em class="__vbk__">motor</em>.</li>
</ul>
</li>
<li class="__vbk__">The <em class="__vbk__">motor</em> then creates a copy of the key it generated and encrypts it with each public key in the root-level DID. This is ultimately what allows another <em class="__vbk__">motor</em> to decrypt the data.</li>
<li class="__vbk__">A request can now be crafted to Highway with the encrypted data and set of encrypted keys.
<ul class="__vbk__">
<li class="__vbk__">The request should include each encrypted <em class="__vbk__">schema</em> along with the list of encrypted shared keys.</li>
</ul>
</li>
</ol><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><a href="https://www.figma.com/file/URTnRygutbDRaSK0swKVyV/Reading%2FWriting-Encrypted-User-Data?node-id=190%3A148" target="_blank" rel="noopener noreferrer" class="__vbk__"><img src="/img/diagrams/writing-encrypted-data-adr-2.png" alt="Writing encrypted data">
<OutboundLink></OutboundLink></a></p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="server" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#server" aria-hidden="true">#</a> Server</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><ol class="__vbk__">
<li class="__vbk__">When a request is received, each object is added to IPFS.</li>
<li class="__vbk__">The CID for each object will be verified, creating an error if one does not match.</li>
<li class="__vbk__">If successful, each CID is added to a record on-chain. Alternatively, each CID may be be part of a bucket update and not stored individually on-chain.</li>
</ol><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="decrypting" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#decrypting" aria-hidden="true">#</a> Decrypting</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The process for decrypting data becomes simple with the above provisions. The <em class="__vbk__">motor</em> will first obtain the shared key—accessible via the <em class="__vbk__">vault</em> (more on that later)—which will be used to encrypt data fetched through IPFS. The entire process is as follows.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><ol class="__vbk__">
<li class="__vbk__">Fetch the shared key and decrypt it.
<ul class="__vbk__">
<li class="__vbk__">The shared key will have already been added to the <em class="__vbk__">vault</em> by the uploading device. This process is outlined in the next section.</li>
</ul>
</li>
<li class="__vbk__">Through IPFS, fetch the relevant data via CID. Then, fetch each referenced CID in the result. Continue this process until all objects have been recovered.</li>
<li class="__vbk__">Decrypt each object using the shared key.</li>
<li class="__vbk__">Compose the original <em class="__vbk__">schema</em> by replacing the IPLD Link with the referenced object.</li>
</ol><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="revoking-access" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#revoking-access" aria-hidden="true">#</a> Revoking Access</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">If any device or party is to have its access revoked, a new key must be used for the next update to that object. This means the process for revoking access is to simply upload the object again, with the revoked party omitted from the OEKM.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="a-note-on-the-vault" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#a-note-on-the-vault" aria-hidden="true">#</a> A Note on the Vault</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Each user on Sonr will have a bucket created for them when they create an account, known as their <em class="__vbk__">vault</em>. The vault acts as a collection of all the user's personal keys or private data. Buckets and vaults will be covered in great detail in ADR-003.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="adding-verification-methods" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#adding-verification-methods" aria-hidden="true">#</a> Adding Verification Methods</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The process of securing user data starts with the verification method. Simply put, verification methods are a member of the DID Document which contain the public keys used for authentication. New verification methods can be added in order for a user to authenticate with new or different keys. Later sections will detail how these methods are used to create JWKs for secure data storage.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The important thing to note about Verification Methods in ADR-002 is that the process for adding a Verification Method must now include encrypting all shared keys again with the new method’s public key.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="schema-model" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#schema-model" aria-hidden="true">#</a> Schema Model</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">A <em class="__vbk__">schema</em> added to Sonr will have the following format.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-go ext-go line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> Schema </span><span style="color: #81A1C1">struct</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    Did </span><span style="color: #81A1C1">string</span></span>
<span class="line"><span style="color: #D8DEE9FF">    Label </span><span style="color: #81A1C1">string</span></span>
<span class="line"><span style="color: #D8DEE9FF">    Fields </span><span style="color: #81A1C1">map</span><span style="color: #ECEFF4">[</span><span style="color: #81A1C1">string</span><span style="color: #ECEFF4">]</span><span style="color: #D8DEE9FF">SchemaKind</span></span>
<span class="line"><span style="color: #ECEFF4">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> SchemaKind </span><span style="color: #81A1C1">int32</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">(</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Invalid </span><span style="color: #D8DEE9">SchemaKind</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #81A1C1">iota</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Map</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_List</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Unit</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Bool</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Int</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Float</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_String</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Bytes</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Link</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Struct</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Union</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Enum</span></span>
<span class="line"><span style="color: #D8DEE9FF">    SchemaKind_Any</span></span>
<span class="line"><span style="color: #ECEFF4">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br><span class="line-number __vbk__">6</span><br><span class="line-number __vbk__">7</span><br><span class="line-number __vbk__">8</span><br><span class="line-number __vbk__">9</span><br><span class="line-number __vbk__">10</span><br><span class="line-number __vbk__">11</span><br><span class="line-number __vbk__">12</span><br><span class="line-number __vbk__">13</span><br><span class="line-number __vbk__">14</span><br><span class="line-number __vbk__">15</span><br><span class="line-number __vbk__">16</span><br><span class="line-number __vbk__">17</span><br><span class="line-number __vbk__">18</span><br><span class="line-number __vbk__">19</span><br><span class="line-number __vbk__">20</span><br><span class="line-number __vbk__">21</span><br><span class="line-number __vbk__">22</span><br><span class="line-number __vbk__">23</span><br><span class="line-number __vbk__">24</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><h4 id="did" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#did" aria-hidden="true">#</a> Did</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The DID that uniquely identifies the Schema.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="label" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#label" aria-hidden="true">#</a> Label</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">A name for this schema.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="fields" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#fields" aria-hidden="true">#</a> Fields</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">A list of properties for this schema.
The property types are defined as <code class="__vbk__">SchemaKind</code>.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="object-model" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#object-model" aria-hidden="true">#</a> Object Model</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Object data on Sonr will be encrypted, but IPFS will contain a wrapper of that data containing some additional metadata.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-go ext-go line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> Object </span><span style="color: #81A1C1">struct</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    Content </span><span style="color: #ECEFF4">[]</span><span style="color: #81A1C1">byte</span></span>
<span class="line"><span style="color: #D8DEE9FF">    EncryptedJWKs </span><span style="color: #81A1C1">map</span><span style="color: #ECEFF4">[</span><span style="color: #D8DEE9FF">PublicKey</span><span style="color: #ECEFF4">]</span><span style="color: #D8DEE9FF">EncryptedJWK</span></span>
<span class="line"><span style="color: #ECEFF4">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> PublicKey </span><span style="color: #81A1C1">string</span></span>
<span class="line"><span style="color: #81A1C1">type</span><span style="color: #D8DEE9FF"> EncryptedJWK </span><span style="color: #81A1C1">string</span></span>
<span class="line"></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br><span class="line-number __vbk__">6</span><br><span class="line-number __vbk__">7</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><h4 id="content" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#content" aria-hidden="true">#</a> Content</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The raw content of this object. May be encrypted with a JWK.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="encryptedjwks" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#encryptedjwks" aria-hidden="true">#</a> EncryptedJWKs</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">A mapping of each public key that has access to the data with the JWK encrypted with said public key.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="object-schema-api-blockchain" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#object-schema-api-blockchain" aria-hidden="true">#</a> Object Schema API (Blockchain)</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The following methods will be added to support creating Schemas and Objects.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="createschema-label-fields" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#createschema-label-fields" aria-hidden="true">#</a> <code class="__vbk__">CreateSchema(label, fields)</code></h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="parameters" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#parameters" aria-hidden="true">#</a> Parameters</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">label (string)</code>
: The label for the Schema. Must be alphanumeric and without whitespace.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">fields (map[string]int32)</code>
: The properties to be included in the Schema. Each key must be alphanumeric and without whitespace. The value is an integer corresponding to a <code class="__vbk__">SchemaKind</code>.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="description" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#description" aria-hidden="true">#</a> Description</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Creates a <em class="__vbk__">schema</em> for use throughout Sonr.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Creating a <em class="__vbk__">schema</em> requires a DID and DID Document to be created.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><blockquote class="__vbk__">
<p class="__vbk__">The model itself will be stored in IPFS, while the DID-CID pair is stored on-chain.</p>
</blockquote><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="getschema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#getschema" aria-hidden="true">#</a> <code class="__vbk__">GetSchema()</code></h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="description-1" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#description-1" aria-hidden="true">#</a> Description</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Returns the schema. Requires no blockchain transactions.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="uploadobject-schemadid-data-encryptedjwks" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#uploadobject-schemadid-data-encryptedjwks" aria-hidden="true">#</a> <code class="__vbk__">UploadObject(schemaDid, data, encryptedJwks)</code></h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="parameters-1" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#parameters-1" aria-hidden="true">#</a> Parameters</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">schemaDid (string)</code>
: The DID of the schema this object adheres to.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">data ([]byte)</code>
: The raw data to be added to IPFS. This can be plaintext or encrypted with the user's root JWK.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">encryptedJwks (map[PK]JWK)</code>
: A map of encrypted JWKs for anyone who should have access to the data. Each JWK must be encrypted with the PK of the shared party.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="description-2" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#description-2" aria-hidden="true">#</a> Description</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Uploads raw data and adds to it IPFS. A CID is returned for addressing the content.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><blockquote class="__vbk__">
<p class="__vbk__">There is no blockchain interactions with this call.</p>
</blockquote><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="getobject-cid" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#getobject-cid" aria-hidden="true">#</a> <code class="__vbk__">GetObject(cid)</code></h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="parameters-2" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#parameters-2" aria-hidden="true">#</a> Parameters</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">cid (string)</code>
The CID which addresses the content on IPFS.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="description-3" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#description-3" aria-hidden="true">#</a> Description</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Returns the object previously uploaded to IPFS, including the map of JWKs. The map can be used to look up and decrypt the appropraite JWK in order to read the data.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><blockquote class="__vbk__">
<p class="__vbk__">This call requires no blockchain interaction.</p>
</blockquote><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="whois-updates" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#whois-updates" aria-hidden="true">#</a> WhoIs Updates</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-go ext-go line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #616E88">// Metadata attached associated with the document</span></span>
<span class="line"><span style="color: #616E88">// data is arbitrary, and thus user specified.</span></span>
<span class="line"><span style="color: #D8DEE9FF">Metadata </span><span style="color: #81A1C1">map</span><span style="color: #ECEFF4">[</span><span style="color: #81A1C1">string</span><span style="color: #ECEFF4">]</span><span style="color: #81A1C1">string</span></span>
<span class="line"></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><h2 id="did-document-verification-definition" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#did-document-verification-definition" aria-hidden="true">#</a> DID Document Verification Definition</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-json ext-json line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #616E88">// Connected Motors Webauthn credentials get stored as verificationMethod</span></span>
<span class="line"><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">verificationMethod</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">[</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #616E88">// Set to Motor Nodes Wallet Address</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">controller</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">did:snr:123</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #616E88">// Id of Key set to unique value and operating system/architecture</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">id</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">did:snr:123#ios-arm64-1</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #616E88">// JWK generated from WebAuthN Credential</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">publicKeyJwk</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">crv</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">P-256</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">kty</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">EC</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">x</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">UANQ8pgvJT33JbrnwMiu1L1JCGQFOEm1ThaNAJcFrWA=</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">y</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">UWm6q5n1iXyeCJLMGDInN40bkkKr8KkoTWDqJBZQXRo=</span><span style="color: #ECEFF4">&quot;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&#125;,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">type</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">JsonWebKey2020</span><span style="color: #ECEFF4">&quot;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&#125;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;</span><span style="color: #ECEFF4">]</span></span>
<span class="line"><span style="color: #ECEFF4">&#125;</span></span>
<span class="line"></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br><span class="line-number __vbk__">6</span><br><span class="line-number __vbk__">7</span><br><span class="line-number __vbk__">8</span><br><span class="line-number __vbk__">9</span><br><span class="line-number __vbk__">10</span><br><span class="line-number __vbk__">11</span><br><span class="line-number __vbk__">12</span><br><span class="line-number __vbk__">13</span><br><span class="line-number __vbk__">14</span><br><span class="line-number __vbk__">15</span><br><span class="line-number __vbk__">16</span><br><span class="line-number __vbk__">17</span><br><span class="line-number __vbk__">18</span><br><span class="line-number __vbk__">19</span><br><span class="line-number __vbk__">20</span><br><span class="line-number __vbk__">21</span><br></div></div><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="ipld-codec" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#ipld-codec" aria-hidden="true">#</a> IPLD Codec</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">DAG-JOSE is a codec that implements the IPLD Data Model as a subset of <code class="__vbk__">JOSE</code>, which complies with the <code class="__vbk__">DAG-CBOR</code> specication. Some additional constraints for hash consistent representations. DAG-CBOR also adds a &quot;link&quot; type using a CBOR tag to bring it in line with the IPLD <a href="https://ipld.io/glossary/#data-model" target="_blank" rel="noopener noreferrer" class="__vbk__">Data Model<OutboundLink></OutboundLink></a>. <a href="https://github.com/ceramicnetwork/go-dag-jose" target="_blank" rel="noopener noreferrer" class="__vbk__">go implementation<OutboundLink></OutboundLink></a></p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="ipld-pathing" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#ipld-pathing" aria-hidden="true">#</a> IPLD Pathing</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Paths are composed of a series of segments, and each segment is an instruction on how to navigate deeper into the filesystem. With filesystems, each step is over a &quot;directory&quot; and leads you to either a &quot;file&quot; or another &quot;directory&quot;; for IPLD, each step is over a &quot;node&quot; and leads you to another &quot;node&quot;!</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="did-methods-for-cbor-jose-support" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#did-methods-for-cbor-jose-support" aria-hidden="true">#</a> DID Methods for CBOR-JOSE support</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The following methods will need to be implemented within <strong class="__vbk__">sonr-io/sonr/pkg/did</strong> for DAG-JOSE support for Sonr DID Documents.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><ul class="__vbk__">
<li class="__vbk__">Authenticate</li>
<li class="__vbk__">CreateJWS</li>
<li class="__vbk__">DecryptJWE</li>
<li class="__vbk__">EnctyptJWE</li>
<li class="__vbk__">VerifyJWS</li>
</ul><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><strong class="__vbk__">Models</strong></p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-text ext-text line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #d8dee9ff">CreateJWSOptions &#123;
    did: string
    protected: map[string]interface&#123;&#125; (optional)
    linkedBlock: string (optional)
&#125;
</span></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><div class="language-text ext-text line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #d8dee9ff">DagJWS = &#123;
  payload: string
  signatures: []JWSSignature
  link: CID (optional)
&#125;
</span></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><div class="language-text ext-text line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #d8dee9ff">VerifyJWSOptions &#123;
  atTime: Date (optional)

  disableTimecheck: boolean (optional)

  issuer: string (optional)

  capability: Cacao (optional)

  revocationPhaseOutSecs: number (optional)
&#125;
</span></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br><span class="line-number __vbk__">6</span><br><span class="line-number __vbk__">7</span><br><span class="line-number __vbk__">8</span><br><span class="line-number __vbk__">9</span><br><span class="line-number __vbk__">10</span><br><span class="line-number __vbk__">11</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><div class="language-text ext-text line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #d8dee9ff">EncryptJWE &#123;
    cleartext: []byte,
    recipients: []string,
    protectedHeader: map[string]interface&#123;&#125;
    aad: []byte (optional)
&#125;
</span></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br><span class="line-number __vbk__">6</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><div class="language-text ext-text line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #d8dee9ff">DecryptJWEOptions &#123;
  did: string (optional)
&#125;
</span></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><h2 id="methods" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#methods" aria-hidden="true">#</a> Methods</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="authenticate" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#authenticate" aria-hidden="true">#</a> Authenticate</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="description-4" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#description-4" aria-hidden="true">#</a> Description</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">DID Authentication communicates with the remote origin of DID document to gain the <code class="__vbk__">JWS</code> or <code class="__vbk__">siganture</code>. Said <code class="__vbk__">JWS</code> is then <code class="__vbk__">verified</code>.
the following operations are important for proper authentication compliance</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><ul class="__vbk__">
<li class="__vbk__">Check the returned <code class="__vbk__">kid</code> includes the did from the verification payload.</li>
<li class="__vbk__">Check experation of the signature</li>
</ul><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="parameters-3" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#parameters-3" aria-hidden="true">#</a> Parameters</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><strong class="__vbk__">provider</strong> - DIDProvider.
<strong class="__vbk__">paths</strong> - didUrl(s) to authenticate
<strong class="__vbk__">aud</strong> - Audience (JWS claim)</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h4 id="returns" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#returns" aria-hidden="true">#</a> Returns</h4><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">A JWS with general serialization containing the following properties:</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">nonce</code>
: The random string which was given as a challenge</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">did</code>
: The DID which authentication was given for</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">paths</code>
: The paths which was given permission for</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">exp</code>
: Unix timestamp after which the JWS should be considered invalid.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">aud</code>
: optional audience for the JWS, should match the domain which made the request.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="createjws" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#createjws" aria-hidden="true">#</a> CreateJWS</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Generates a JSON web signature object composed of a multi signature key.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-json ext-json line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">link</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">/</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">bafybeig6xv5nwphfmvcnektpnojts33jqcuam7bmye2pb54adnrtccjlsu</span><span style="color: #ECEFF4">&quot;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&#125;,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">payload</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">AXASIN69ets85WVE0ipva5M5b2mAqAZ8LME08PeAG2MxCSuV</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">signatures</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">[</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;</span><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">protected</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">eyJhbGciOiJFUzI1NksifQ</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">signature</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">SiYGXW7Yi-KxbpIlLNmu0lEhrayV7ypaAC49GAcQ_qpTstZW89Mz6Cp8VlUEX-qVsgYjc-9-1zvLcDYlxOsr1g</span><span style="color: #ECEFF4">&quot;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;</span><span style="color: #ECEFF4">&#125;,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;</span><span style="color: #ECEFF4">&#123;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">protected</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">eyJhbGciOiJFUzI1NksifQ</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #8FBCBB">signature</span><span style="color: #ECEFF4">&quot;</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">&quot;</span><span style="color: #A3BE8C">Q8PdTE5A5N3a0ktO2wNdUymumHlSxNF9Si38IvzsMaSZC63yQw-bJNpKf-UeJFPH7cDzY7jLg2G_viejp7NqXg</span><span style="color: #ECEFF4">&quot;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;&nbsp;</span><span style="color: #ECEFF4">&#125;</span></span>
<span class="line"><span style="color: #D8DEE9FF">&nbsp;</span><span style="color: #ECEFF4">]</span></span>
<span class="line"><span style="color: #ECEFF4">&#125;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br><span class="line-number __vbk__">6</span><br><span class="line-number __vbk__">7</span><br><span class="line-number __vbk__">8</span><br><span class="line-number __vbk__">9</span><br><span class="line-number __vbk__">10</span><br><span class="line-number __vbk__">11</span><br><span class="line-number __vbk__">12</span><br><span class="line-number __vbk__">13</span><br><span class="line-number __vbk__">14</span><br><span class="line-number __vbk__">15</span><br><span class="line-number __vbk__">16</span><br><span class="line-number __vbk__">17</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><h3 id="params" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#params" aria-hidden="true">#</a> Params</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">payload</code>
: The payload to sign, json object or base64url encoded string.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">protected</code>
: The protected header, json object.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">did</code>
: The DID that should sign the message, may include the key, fragment.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">revocable</code>
: Makes the JWS revocable when rotating keys, boolean default to false</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><strong class="__vbk__">Returns</strong>: <code class="__vbk__">DAGJws</code></p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="verifyjws" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#verifyjws" aria-hidden="true">#</a> VerifyJWS</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="description-5" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#description-5" aria-hidden="true">#</a> Description</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">We can compute the <code class="__vbk__">SHA-256</code> representation if the specified <code class="__vbk__">secret</code> is present within the generated token. Upon querying for an ecrypted entry within ipfs, the DID controller of said object should be able to <code class="__vbk__">verify</code> the signature as it should be aware of valid signatures relating to itself.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="params-1" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#params-1" aria-hidden="true">#</a> Params</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">jws</code>
: signature to verify</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">options</code>
: VeriftyJWSOptions</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><strong class="__vbk__">Returns</strong></p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h1 id="object-schemas" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#object-schemas" aria-hidden="true">#</a> Object Schemas</h1><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="ipld-object-schema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#ipld-object-schema" aria-hidden="true">#</a> IPLD Object Schema</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">IPLD represents data types which can be stored in IPFS nodes as “Kinds” the following are types which “Kinds” support:</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><ul class="__vbk__">
<li class="__vbk__"><code class="__vbk__">boolean</code></li>
<li class="__vbk__"><code class="__vbk__">integer</code></li>
<li class="__vbk__"><code class="__vbk__">float</code></li>
<li class="__vbk__"><code class="__vbk__">map</code></li>
<li class="__vbk__"><code class="__vbk__">list</code></li>
<li class="__vbk__"><code class="__vbk__">string</code></li>
<li class="__vbk__"><code class="__vbk__">null</code></li>
<li class="__vbk__"><code class="__vbk__">bytes</code></li>
<li class="__vbk__"><code class="__vbk__">link</code></li>
</ul><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Kinds in IPLD are similar to data types supported within “JSON” but also add “bytes” and “link” where link maps to “CID” type.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="dsl-representation-of-object-schema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#dsl-representation-of-object-schema" aria-hidden="true">#</a> DSL Representation of Object Schema</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Node builders allow you to declare schema within an object representation that then can be transformed to various types. Builders then can be represented in DSL which is a declarative syntax for IPLD schemas similar to JSON.  The following is a method stub for creating an object schema for later usage.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="createobjectschema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#createobjectschema" aria-hidden="true">#</a> CreateObjectSchema</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Creation of an object will define a schema for objects to be later stored in IPFS. <code class="__vbk__">Schemas</code> define the shape of data for a given object.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="putobjectschema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#putobjectschema" aria-hidden="true">#</a> PutObjectSchema</h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">func (i *IPFSProtocol) PutObjectSchema(doc *ot.ObjectDoc) (*cid.Cid, error)</code></p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h3 id="implementation-using-ipld-node-builder" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#implementation-using-ipld-node-builder" aria-hidden="true">#</a> Implementation using IPLD Node Builder</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Stores a DSL representation of a defined object schema with the following relationship denoting a property of the persistent schema.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-text ext-text line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #d8dee9ff">&#123;
    Label: string
    Type: Kind
&#125;
</span></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><p class="__vbk__">This object will be stored within an aggregate (array structure) within the ObjectDoc and should be iterated over and stored within a node builder, then serialized to a byte representation.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="getobjectschema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#getobjectschema" aria-hidden="true">#</a> GetObjectSchema</h2><!-- HTML_TAG_END -->

<!-- HTML_TAG_START --><h3 id="function-signature" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#function-signature" aria-hidden="true">#</a> Function Signature</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">func (i *IPFSProtocol) GetObjectSchema(cid *CID) (Node, error)</code></p><!-- HTML_TAG_END -->

<!-- HTML_TAG_START --><h3 id="implementation-string-repersentation-of-schema" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#implementation-string-repersentation-of-schema" aria-hidden="true">#</a> Implementation (string repersentation of schema)</h3><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Instead of using a <code class="__vbk__">node builder</code> to build our schema up from a tree of related objects, the schema structured can be <code class="__vbk__">loaded</code> from a string repersentation of the <code class="__vbk__">ipld</code> schema:</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-text ext-text line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #d8dee9ff">&#39;
    &#123;
        &quot;foo&quot;: string,
        &quot;baz&quot;: &#123;
            &quot;prop&quot;: integer
        &#125;
    &#125;
&#39;
</span></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br><span class="line-number __vbk__">4</span><br><span class="line-number __vbk__">5</span><br><span class="line-number __vbk__">6</span><br><span class="line-number __vbk__">7</span><br><span class="line-number __vbk__">8</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><p class="__vbk__">The above repersentation can be serialized to a Byte Array, and loaded as a static schema structure. Therefore, we can then store this structure as a schema for schemas as the following:</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><div class="language-text ext-text line-numbers-mode __vbk__"><pre class="shiki __vbk__" style="background-color: #2e3440ff"><code><span class="line"><span style="color: #d8dee9ff">&#123;
&quot;schema&quot;: []byte,
&#125;
</span></span></code></pre><div class="line-numbers __vbk__"><span class="line-number __vbk__">1</span><br><span class="line-number __vbk__">2</span><br><span class="line-number __vbk__">3</span><br></div></div><!-- HTML_TAG_END --><!-- HTML_TAG_START --><p class="__vbk__"><code class="__vbk__">schema</code>
: Schema decleration as an array of bytes.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h1 id="interaction-methods-for-highway-to-motor-communication" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#interaction-methods-for-highway-to-motor-communication" aria-hidden="true">#</a> Interaction Methods for Highway to Motor Communication</h1><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">The following are interface methods that should be defined on <code class="__vbk__">Host</code> and implemented for Host targets.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="accessapp" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#accessapp" aria-hidden="true">#</a> <code class="__vbk__">AccessApp()</code></h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">User authenticates a Registered Application on Sonr with their DID Based Multisignature key for all their devices. Creates a new Bucket inside the User bucket for the newly provisioned Application.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="interactobject" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#interactobject" aria-hidden="true">#</a> <code class="__vbk__">InteractObject()</code></h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">Maps user defined object to a <code class="__vbk__">object schema</code>. Which is then pushed to a bucket.</p><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><h2 id="readobject" tabindex="-1" class="__vbk__"><a class="header-anchor __vbk__" href="#readobject" aria-hidden="true">#</a> <code class="__vbk__">ReadObject()</code></h2><!-- HTML_TAG_END -->
<!-- HTML_TAG_START --><p class="__vbk__">This method begins the request process for reading the individual object values of another User's app bucket. Provisioned users will automatically get access (if they called RequestBucket already) and unprovisioned users will send the RequestBucket to the corresponding peer.</p><!-- HTML_TAG_END -->

    

    
          </div>
</main>
      </div>

    </div>

  
    
  

  

  

  
    <div class="scrim __vbk__ svelte-kg26u5"><button class="scrim __vbk__ svelte-zhfmk7" aria-label="Close scrim"></button></div>
  
</div></div>
    <script type="module" src="/assets/entry-client.ccb32cf7.js" defer></script>
  </body>
</html>
